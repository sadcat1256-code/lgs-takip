<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LGS Takip Sistemi</title>
<style>
:root{
--bg:#0f0b1e;--card:#1b1533;--accent:#6c2bd9;--neon:#9d7cff;
--text:#fff;--muted:#b5b5c3
}
*{box-sizing:border-box}
body{margin:0;font-family:Arial;background:var(--bg);color:var(--text)}
.center{min-height:100vh;display:flex;justify-content:center;align-items:center;flex-direction:column}
.box{background:var(--card);padding:24px;border-radius:18px;width:520px;box-shadow:0 0 25px #000}
input,textarea,select{width:100%;padding:11px;margin-top:10px;border-radius:12px;border:none;background:#2a2450;color:white}
.btn{width:100%;padding:13px;margin-top:14px;border:none;border-radius:14px;background:var(--accent);color:white;font-weight:bold;cursor:pointer}
.btn:hover{box-shadow:0 0 12px var(--neon)}
.top{display:flex;justify-content:space-between;align-items:center;padding:14px;background:#120e24}
.menu{display:flex;gap:10px}
.menu button{background:var(--card);border:none;color:white;padding:10px 16px;border-radius:12px;cursor:pointer;transition:.3s}
.menu button:hover{box-shadow:0 0 12px var(--neon);transform:rotateY(15deg)}
.user{cursor:pointer;display:flex;align-items:center;gap:10px}
.card{background:linear-gradient(145deg,#1b1533,#241c4a);border-radius:20px;padding:20px;margin:18px}
footer{text-align:center;color:var(--muted);padding:20px}
.hidden{display:none}
.wait-screen{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(109,43,217,0.95);color:white;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000}
.wait-screen .clock{font-size:48px;margin-bottom:20px;animation:spin 2s linear infinite;}
@keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
textarea{border-radius:12px;padding:10px;background:#2a2450;color:white;resize:none}
.deneme-btn{padding:8px 16px;margin:4px;background:#6c2bd9;border:none;color:white;border-radius:10px;cursor:pointer;}
.deneme-btn:hover{box-shadow:0 0 10px var(--neon);}
.checkbox-group{display:flex;gap:12px;flex-wrap:wrap;margin-top:10px;}
.checkbox-group label{display:flex;align-items:center;gap:4px;}
canvas{background:#241c4a;border-radius:12px;margin-top:20px;}
</style>
</head>
<body>

<!-- BEKLEME EKRANI -->
<div id="waitScreen" class="wait-screen hidden">
 <div class="clock">â³</div>
 <div style="font-size:28px;font-weight:bold;text-align:center">LÃœTFEN BEKLEYÄ°NÄ°Z</div>
</div>

<!-- GÄ°RÄ°Å / KAYIT -->
<div id="auth" class="center">
 <div class="box">
  <h2>ğŸ‘¤ GiriÅŸ / KayÄ±t</h2>
  <input id="luser" placeholder="KullanÄ±cÄ± adÄ±">
  <input id="lpass" type="password" placeholder="Åifre">
  <button class="btn" onclick="login()">GiriÅŸ Yap</button>
  <button class="btn" onclick="showAdmin()">Admin GiriÅŸi</button>
  <hr style="margin:12px 0">
  <h3>Yeni kullanÄ±cÄ± kaydÄ±</h3>
  <input id="ruser" placeholder="KullanÄ±cÄ± adÄ±">
  <input id="rpass" type="password" placeholder="Åifre">
  <input id="rsaat" placeholder="Eve kaÃ§ta geliyorsunuz? (HH:MM)">
  <input id="rkurs" placeholder="Kurs var mÄ±? (Evet/HayÄ±r)">
  <button class="btn" onclick="kayitIstek()">KayÄ±t Ol</button>
 </div>
</div>

<!-- ADMÄ°N -->
<div id="admin" class="hidden">
 <div class="top">
  <div class="menu">
   <button onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
  </div>
  <div class="user">Admin</div>
 </div>
 <div class="card">
  <h2>ğŸ‘‘ Admin Paneli</h2>
  <h3>KullanÄ±cÄ±lar</h3>
  <div id="users"></div>
  <h3>KayÄ±t Ä°stekleri</h3>
  <div id="requests"></div>
  <h3>Feedbackler</h3>
  <div id="feedbacks"></div>
 </div>
</div>

<!-- ANA SÄ°TE -->
<div id="site" class="hidden">
 <div class="top">
  <div class="menu">
   <button onclick="go('program')">Program</button>
   <button onclick="go('deneme')">Deneme</button>
  </div>
  <div class="user">
   <span id="uname"></span>
   <button class="btn" style="width:auto;padding:6px 12px" onclick="showAdmin()">Admin</button>
  </div>
 </div>

 <!-- Program -->
 <div id="program" class="card">
  <h3>ğŸ“… GÃ¼nlÃ¼k Program</h3>
  <div id="kursSaat"></div>
  <div>
    <h4>Ders SeÃ§imi</h4>
    <div class="checkbox-group">
      <label><input type="checkbox" value="Matematik" class="ders">Matematik</label>
      <label><input type="checkbox" value="Fen" class="ders">Fen</label>
      <label><input type="checkbox" value="TÃ¼rkÃ§e" class="ders">TÃ¼rkÃ§e</label>
      <label><input type="checkbox" value="Sosyal" class="ders">Sosyal</label>
    </div>
    <button class="btn" onclick="saveDers()">Dersleri Kaydet</button>
  </div>
  <div id="aiProgram"></div>
</div>

<!-- Deneme -->
<div id="deneme" class="card">
  <h3>â± Deneme / Net / DoÄŸru / YanlÄ±ÅŸ / Ã‡Ã¶zdÃ¼ÄŸÃ¼n Sorular / Puan</h3>
  <div id="timer">40:00</div>
  <div id="netler"></div>
  <div id="sorular"></div>
  <canvas id="historyChart" width="400" height="200"></canvas>
</div>
</div>

<footer>
TeÅŸekkÃ¼rler ChatGPT ğŸ’œ<br>
<textarea id="fbtext" placeholder="Feedbackinizi buraya yazÄ±n..."></textarea>
<button class="btn" onclick="sendFeedback()">GÃ¶nder</button>
</footer>

<audio id="clickSound" src="hightech-ui-mouse-click-audio-material.mp3"></audio>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const adminPass='yahyaben.47';
let aktif=null,timer=40*60,interval=null;

// TÄ±klama sesi
document.addEventListener('click',e=>{if(e.target.tagName==='BUTTON')document.getElementById('clickSound').play();})

// Bekleme ekranÄ±
function showWait(){document.getElementById('waitScreen').classList.remove('hidden');}
function hideWait(){document.getElementById('waitScreen').classList.add('hidden');}

// KayÄ±t
function kayitIstek(){
  let u=document.getElementById('ruser').value;
  let p=document.getElementById('rpass').value;
  if(!u||!p) return alert('BoÅŸ bÄ±rakma');
  let s=document.getElementById('rsaat').value;
  let k=document.getElementById('rkurs').value;
  localStorage.setItem('req_'+u,JSON.stringify({u,p,s,k,approved:false,net:0,dogru:0,yanlis:0,cozuldu:0,dersler:[],history:[]}));
  showWait();
}

// Admin
function showAdmin(){
 let p=prompt('Admin ÅŸifresi');
 if(p===adminPass){
   document.getElementById('auth').classList.add('hidden');
   document.getElementById('site').classList.add('hidden');
   document.getElementById('admin').classList.remove('hidden');
   gosterAdmin();
 }else alert('HatalÄ± ÅŸifre');
}

function gosterAdmin(){
 let keys=Object.keys(localStorage).filter(k=>k.startsWith('req_'));
 document.getElementById('requests').innerHTML=keys.map(k=>{
   let d=JSON.parse(localStorage.getItem(k));
   return `<div>${d.u} | Kurs: ${d.k} | Saat: ${d.s} 
           <button onclick="approve('${d.u}')">Onayla</button></div>`;
 }).join('');
 let userKeys=Object.keys(localStorage).filter(k=>k.startsWith('user_'));
 document.getElementById('users').innerHTML=userKeys.map(k=>{
   let d=JSON.parse(localStorage.getItem(k));
   return `<div>${d.u} | Kurs: ${d.k} | Saat: ${d.s} | Net:${d.net} | DoÄŸru:${d.dogru} | YanlÄ±ÅŸ:${d.yanlis} | Ã‡Ã¶zdÃ¼:${d.cozuldu} | Dersler: ${d.dersler.join(', ')} 
   <button onclick="sifreSifirla('${d.u}')">Åifre SÄ±fÄ±rla</button></div>`;
 }).join('');
 document.getElementById('feedbacks').innerHTML=JSON.parse(localStorage.getItem('feedback')||'[]').map(f=>`<div>${f.user}: ${f.text}</div>`).join('');
}

// Onayla
function approve(u){
 let data=JSON.parse(localStorage.getItem('req_'+u));
 if(!data) return;
 data.approved=true;
 localStorage.setItem('user_'+u,JSON.stringify(data));
 localStorage.removeItem('req_'+u);
 hideWait();
 gosterAdmin();
 alert(u+' onaylandÄ±, giriÅŸ yapabilir.');
}

// Login
function login(){
 let u=document.getElementById('luser').value;
 let p=document.getElementById('lpass').value;
 let data=JSON.parse(localStorage.getItem('user_'+u)||'null');
 if(!data) return alert('KullanÄ±cÄ± bulunamadÄ± veya admin onayÄ± gerekli');
 if(!data.approved) return alert('KayÄ±t beklemede, admin onayÄ± gerekli');
 if(data.p!==p) return alert('HatalÄ± ÅŸifre');
 aktif=u;
 document.getElementById('auth').classList.add('hidden');
 document.getElementById('site').classList.remove('hidden');
 document.getElementById('uname').innerText=u;
 document.getElementById('kursSaat').innerHTML=`Kurs: ${data.k} | Saat: ${data.s}`;
 // Dersler checkbox iÅŸaretleme
 document.querySelectorAll('.ders').forEach(cb=>cb.checked = data.dersler.includes(cb.value));
 document.getElementById('netler').innerHTML=`DoÄŸru: ${data.dogru} | YanlÄ±ÅŸ: ${data.yanlis} | Net: ${data.net} | Ã‡Ã¶zdÃ¼: ${data.cozuldu} | Puan: ${(data.net*4).toFixed(2)}`;
 aiProgram(data);
 denemeOlustur(data);
 denemeBaslat();
}

// Ders kaydet
function saveDers(){
  let data=JSON.parse(localStorage.getItem('user_'+aktif));
  let dersler = Array.from(document.querySelectorAll('.ders')).filter(cb=>cb.checked).map(cb=>cb.value);
  data.dersler=dersler;
  localStorage.setItem('user_'+aktif,JSON.stringify(data));
  aiProgram(data);
  alert('Dersler kaydedildi.');
}

// AI Ã¶nerisi
function aiProgram(data){
 let kursVar = data.k.toLowerCase() === 'evet';
 let saat = data.s.split(':').map(Number);
 let Ã¶neri='';
 if(data.dersler.length===0){Ã¶neri='LÃ¼tfen ders seÃ§imi yapÄ±n.';}
 else if(kursVar){Ã¶neri=`Kurs olduÄŸundan ${data.dersler.join(', ')} derslerini 19:00-21:00 arasÄ± Ã§alÄ±ÅŸabilirsiniz.`;}
 else{
   let basla = saat[0]+1;
   Ã¶neri=`Eve geldikten sonra ${data.dersler.join(', ')} derslerini ${basla}:00-${basla+2}:00 arasÄ± Ã§alÄ±ÅŸabilirsiniz.`;
 }
 document.getElementById('aiProgram').innerHTML=`<b>Ã–nerilen Ã‡alÄ±ÅŸma:</b> ${Ã¶neri}`;
}

// Deneme sorularÄ±
let sorular = [
 {q:'5+3=?',c:'8'},
 {q:'7-2=?',c:'5'},
 {q:'12:4=?',c:'3'},
 {q:'9*2=?',c:'18'},
 {q:'15-6=?',c:'9'},
 {q:'10-7=?',c:'3'},
 {q:'6*3=?',c:'18'},
 {q:'14+5=?',c:'19'}
];

function denemeOlustur(data){
 let html = '';
 sorular.forEach((s,i)=>{
   html+=`<div>${s.q} 
   <button class="deneme-btn" onclick="cevap('${data.u}',${i},true)">DoÄŸru</button>
   <button class="deneme-btn" onclick="cevap('${data.u}',${i},false)">YanlÄ±ÅŸ</button>
   </div>`;
 });
 document.getElementById('sorular').innerHTML=html;
}

// Cevap
function cevap(user,index,dogru){
 let data=JSON.parse(localStorage.getItem('user_'+user));
 data.cozuldu+=1;
 if(dogru){data.dogru+=1;}else{data.yanlis+=1;}
 data.net = data.dogru - data.yanlis*0.25;
 data.history.push({dogru:data.dogru,yanlis:data.yanlis,net:data.net});
 localStorage.setItem('user_'+user,JSON.stringify(data));
 document.getElementById('netler').innerHTML=`DoÄŸru: ${data.dogru} | YanlÄ±ÅŸ: ${data.yanlis} | Net: ${data.net.toFixed(2)} | Ã‡Ã¶zdÃ¼: ${data.cozuldu} | Puan: ${(data.net*4).toFixed(2)}`;
 updateChart(data.history);
}

// Deneme timer
function denemeBaslat(){
 timer=40*60;
 if(interval) clearInterval(interval);
 interval=setInterval(()=>{
   timer--;
   let m=Math.floor(timer/60).toString().padStart(2,'0');
   let s=(timer%60).toString().padStart(2,'0');
   document.getElementById('timer').innerText=`${m}:${s}`;
   if(timer<=0) clearInterval(interval);
 },1000);
}

// Grafik
let chart=null;
function updateChart(history){
 const ctx = document.getElementById('historyChart').getContext('2d');
 const labels = history.map((h,i)=>`Deneme ${i+1}`);
 const data = {
   labels: labels,
   datasets: [{
     label: 'DoÄŸru',
     data: history.map(h=>h.dogru),
     backgroundColor: '#6c2bd9'
   },{
     label: 'YanlÄ±ÅŸ',
     data: history.map(h=>h.yanlis),
     backgroundColor: '#d92b2b'
   },{
     label: 'Net',
     data: history.map(h=>h.net),
     backgroundColor: '#2bd98f'
   }]
 };
 if(chart) chart.destroy();
 chart = new Chart(ctx,{type:'bar',data:data,options:{responsive:true,plugins:{legend:{position:'top'}}}});
}

// Feedback
function sendFeedback(){
 let fb=document.getElementById('fbtext').value;
 if(!fb) return;
 let f=JSON.parse(localStorage.getItem('feedback')||'[]');
 f.push({user:aktif||'Anonim',text:fb,date:new Date().toLocaleString()});
 localStorage.setItem('feedback',JSON.stringify(f));
 alert('TeÅŸekkÃ¼rler! Feedback gÃ¶nderildi');
 document.getElementById('fbtext').value='';
}

// Ã‡Ä±kÄ±ÅŸ
function logout(){location.reload()}

// Sayfa kaydÄ±r
function go(id){document.getElementById(id).scrollIntoView({behavior:'smooth'})}
</script>
</body>
</html>
